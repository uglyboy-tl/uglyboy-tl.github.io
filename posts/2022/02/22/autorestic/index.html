<!doctype html><html lang=zh-cn dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Autorestic | 拾柒读库</title>
<meta name=keywords content="restic,Docker,automation"><meta name=description content="完善的数据自动备份系统"><meta name=author content="癸老师"><link rel=canonical href=https://blog.uglyboy.cn/posts/2022/02/22/autorestic/><link crossorigin=anonymous href=/assets/css/stylesheet.d73d5a01dbf379e7897a3627eff85bf83c060878b9f292d177847340a76d2c8d.css integrity="sha256-1z1aAdvzeeeJejYn7/hb+DwGCHi58pLRd4RzQKdtLI0=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.uglyboy.cn/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.uglyboy.cn/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.uglyboy.cn/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.uglyboy.cn/apple-touch-icon.png><link rel=mask-icon href=https://blog.uglyboy.cn/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh-cn href=https://blog.uglyboy.cn/posts/2022/02/22/autorestic/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://blog.uglyboy.cn/scss/main.min.bb0f243946b87c8f66307b9c43939ead878278180e8edada628b0d7ecd38edfc.css integrity="sha256-uw8kOUa4fI9mMHucQ5OerYeCeBgOjtraYosNfs047fw=" media=screen><script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,processEnvironments:!0},options:{enableExplorer:!1,skipHtmlTags:["script","noscript","style","textarea","pre"]}},window.addEventListener("load",e=>{document.querySelectorAll("mjx-container").forEach(function(e){e.parentElement.classList+="has-jax"})})</script><script src=https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/7.12.1/polyfill.min.js integrity="sha512-uzOpZ74myvXTYZ+mXUsPhDF+/iL/n32GDxdryI2SJronkEyKC8FBFRLiBQ7l7U/PTYebDbgTtbqTa6/vGtU23A==" crossorigin=anonymous referrerpolicy=no-referrer></script><script crossorigin=anonymous integrity="sha512-6FaAxxHuKuzaGHWnV00ftWqP3luSBRSopnNAA2RvQH1fOfnF/A1wOfiUWF7cLIOFcfb1dEhXwo5VG3DAisocRw==" src=https://lib.baomitu.com/mathjax/3.2.2/es5/tex-mml-chtml.min.js></script><link crossorigin=anonymous integrity="sha512-YZW7jSV4QrwpPzFxB77lAW4qNIeS6RaipaStONrpmbJsyh3zxM/3VoeQrrGlYkNS5nIjsKFURRHnsKhmE/vWmg==" href=https://lib.baomitu.com/lxgw-wenkai-webfont/latest/style.min.css rel=stylesheet><style>body,section{font-family:lxgw wenkai,sans-serif}</style><script async src="https://www.googletagmanager.com/gtag/js?id=G-0T89SF4PSW"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-0T89SF4PSW")}</script><meta property="og:url" content="https://blog.uglyboy.cn/posts/2022/02/22/autorestic/"><meta property="og:site_name" content="拾柒读库"><meta property="og:title" content="Autorestic"><meta property="og:description" content="完善的数据自动备份系统"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-02-22T06:44:00+08:00"><meta property="article:modified_time" content="2024-11-13T22:28:11+08:00"><meta property="article:tag" content="Restic"><meta property="article:tag" content="Docker"><meta property="article:tag" content="Automation"><meta name=twitter:card content="summary"><meta name=twitter:title content="Autorestic"><meta name=twitter:description content="完善的数据自动备份系统"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"文章","item":"https://blog.uglyboy.cn/posts/"},{"@type":"ListItem","position":2,"name":"Autorestic","item":"https://blog.uglyboy.cn/posts/2022/02/22/autorestic/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Autorestic","name":"Autorestic","description":"完善的数据自动备份系统","keywords":["restic","Docker","automation"],"articleBody":" 原本是打算不再在这里写技术类博客了，结果最近的一个小成果确实没啥合适的地方存放，所以还是留在这里吧。\n自从开始使用树莓派，忧虑的一个重要问题就是：万一我的硬盘坏了可怎么办？通常的方案是硬盘组磁盘列阵，例如 raid1，raid5，raid10。可惜这套方案价格太高，不符合我用树莓派做 NAS 的风格。所以还是追求一套通常且通用的数据备份方案。\n其间尝试了一些手段，例如：rclone，Duplicati，rsync，自己写 shell 脚本等等，但是如何构建一个完善的数据备份方案还是比较复杂的，需要考虑包括备份的可靠性，备份文件的大小（冗余程度），备份的版本管理，按不同时效留档等很多的要素。\n最终，终于遇到了 automation ，并依此打造了一套完善的备份方案。\n备份方案的基本原则 备份数据要保证本地非源数据的硬盘保存一份，云端保存一份； 云端备份需要有数据加密机制； 备份数据需要有类似 git 的版本管理机制，保证冗余数据不被重复存储，且按版本标签可方便的管理； 云端保存需要支持各种云端数据源； 本地需要有旧版本文件清理机制； 可以对不同的数据源进行不同的备份机制设定； 自动化管理备份，无需过多的人工干预和介入； 数据备份方案的基本组件 rclone 最早我是使用 rclone + shell 进行备份的，但是这只能解决云端备份和支持数据源的部分，而且设定异常的复杂。根本原因是在于，rclone 其实是一款同步数据应用，而不是数据备份应用。\n但现在有了一个良好的开端：可以将数据同步到任何云端网盘中了。\nrestic 这是一款类似于 rclone 的软件，但是不同的是，restic 是专注于备份的软件，支持加密传输，增量备份，快照记录等等，而且还可以同 rclone 联动，利用 rclone 支持多种云端的能力，将数据备份到各种网盘中。\n另外，restic 也可以非常便捷的还原任何一个版本的数据，总得来说，是一个很简单便捷的备份工具。但它是一个命令行工具，也就是说，并不是一个服务，无法提供自动备份的功能（定时备份），而且每一项操作都需要运行相关命令加参数。\n如此一来，关于备份这件事，就只剩下自动化版本管理这个问题需要解决了。\nautorestic autorestic 是 restic 的一个「包装器」，通过自动调用 restic 的方法，加上了配置文件、定时执行（伪）等功能。将命令行程序扩展成了一个基于固定配置可重复运行的应用。\n相关的命令说明还是需要自己看一下官方的文档。\n但 autorestic 依然是一个命令行，不是服务，虽然提供了配置文件的方式可重复操作，但依然无法实现定时自动备份功能\ncrontab autorestic 的官方文档推荐的方式即配合 crontab 每 5 分钟执行一次的方式 将 autorestic 配置成一个伪服务，进而提供定时自动备份功能。\ndocker 最后，终极的解决方案，是需要将这些工具组合起来，形成一套完整的工具链。于是将对应的工具打包进 docker image，就可以便捷的部署和使用对应的自动化备份方案了。\n2023-12-18 更新 之前一直没有能自动进行 forget 操作，导致备份的数据越来越多。这个问题需要在 autorestic 的配置文件中添加 forget 的配置。 之前的镜像的 hostname 每次都是随机生成的，导致每次都会重新初始化，现在已经解决了这个问题，通过在 docker-compose 中添加 hostname，可以保证每次都是同一个 hostname 了。 最终的数据自动化备份解决方案 我通过 Github 的自动化流程，构建了实现上述 autorestic 服务的 镜像 ，使用说明如下：\nFeatures Often it is usefully to trigger backups automatically. So in this image, it would be trigger the command every 5min.\nInstall Create an initial config file (autorestic.yml) such as: 1 2 3 4 5 6 locations: my-location: from: /data to: my-backend forget: prune cron: '0 3 * * 0' # Every Sunday at 3:00 You can read full docs to configure it.\nCreate an empty file (autorestic.lock.yml) run [[docker-compose]] as below: 1 2 3 4 5 6 7 8 9 10 11 12 13 version: \"3\" services: autorestic: image: guixi/autorestic container_name: autorestic restart: unless-stopped hostname: autorestic volumes: - /etc/localtime:/etc/localtime:ro - $(pwd)/autorestic.yml:/root/.autorestic.yml:ro - $(pwd)/autorestic.lock.yml:/root/.autorestic.lock.yml - ~/.config/rclone/rclone.conf:/root/.config/rclone/rclone.conf:ro #optional - my-volume:/data Usage you can use autorestic to show all buckups such as\n1 docker exec -it autorestic autorestic exec -av -- snapshots and also use restic directly such as\n1 docker exec -it autorestic restic License MIT © Uglyboy\n","wordCount":"1421","inLanguage":"zh-cn","datePublished":"2022-02-22T06:44:00+08:00","dateModified":"2024-11-13T22:28:11+08:00","author":{"@type":"Person","name":"癸老师"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.uglyboy.cn/posts/2022/02/22/autorestic/"},"publisher":{"@type":"Organization","name":"拾柒读库","logo":{"@type":"ImageObject","url":"https://blog.uglyboy.cn/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.uglyboy.cn/ accesskey=h title="拾柒读库 (Alt + H)">拾柒读库</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.uglyboy.cn/posts/ title=文章><span>文章</span></a></li><li><a href=https://blog.uglyboy.cn/slides/ title=演示><span>演示</span></a></li><li><a href=https://blog.uglyboy.cn/categories/ title=分类><span>分类</span></a></li><li><a href=https://blog.uglyboy.cn/tags/ title=标签><span>标签</span></a></li><li><a href=https://blog.uglyboy.cn/search/ title="搜索 (Alt + /)" accesskey=/><span>搜索</span></a></li><li><a href=https://blog.uglyboy.cn/archives/ title=时间轴><span>时间轴</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Autorestic</h1><div class=post-description>完善的数据自动备份系统</div><div class=post-meta><span title='2022-02-22 06:44:00 +0800 CST'>2022-02-22</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;癸老师</div></header><div class=post-content><blockquote><p>原本是打算不再在这里写技术类博客了，结果最近的一个小成果确实没啥合适的地方存放，所以还是留在这里吧。</p></blockquote><p>自从开始使用树莓派，忧虑的一个重要问题就是：万一我的硬盘坏了可怎么办？通常的方案是硬盘组磁盘列阵，例如 raid1，raid5，raid10。可惜这套方案价格太高，不符合我用树莓派做 NAS 的风格。所以还是追求一套通常且通用的数据备份方案。</p><p>其间尝试了一些手段，例如：rclone，Duplicati，rsync，自己写 shell 脚本等等，但是如何构建一个完善的数据备份方案还是比较复杂的，需要考虑包括备份的可靠性，备份文件的大小（冗余程度），备份的版本管理，按不同时效留档等很多的要素。</p><p>最终，终于遇到了 <a href=https://autorestic.vercel.app/>automation</a> ，并依此打造了一套完善的备份方案。</p><h2 id=备份方案的基本原则>备份方案的基本原则<a hidden class=anchor aria-hidden=true href=#备份方案的基本原则>#</a></h2><ul><li>备份数据要保证本地非源数据的硬盘保存一份，云端保存一份；</li><li>云端备份需要有数据加密机制；</li><li>备份数据需要有类似 git 的版本管理机制，保证冗余数据不被重复存储，且按版本标签可方便的管理；</li><li>云端保存需要支持各种云端数据源；</li><li>本地需要有旧版本文件清理机制；</li><li>可以对不同的数据源进行不同的备份机制设定；</li><li>自动化管理备份，无需过多的人工干预和介入；</li></ul><h2 id=数据备份方案的基本组件>数据备份方案的基本组件<a hidden class=anchor aria-hidden=true href=#数据备份方案的基本组件>#</a></h2><h3 id=rclone>rclone<a hidden class=anchor aria-hidden=true href=#rclone>#</a></h3><p>最早我是使用 rclone + shell 进行备份的，但是这只能解决云端备份和支持数据源的部分，而且设定异常的复杂。根本原因是在于，rclone 其实是一款同步数据应用，而不是数据备份应用。</p><p>但现在有了一个良好的开端：可以将数据同步到任何云端网盘中了。</p><h3 id=restichttpsresticnet><a href=https://restic.net/>restic</a><a hidden class=anchor aria-hidden=true href=#restichttpsresticnet>#</a></h3><p>这是一款类似于 rclone 的软件，但是不同的是，restic 是专注于备份的软件，支持加密传输，增量备份，快照记录等等，而且还可以同 rclone 联动，利用 rclone 支持多种云端的能力，将数据备份到各种网盘中。</p><p>另外，restic 也可以非常便捷的还原任何一个版本的数据，总得来说，是一个很简单便捷的备份工具。但它是一个命令行工具，也就是说，并不是一个服务，无法提供自动备份的功能（定时备份），而且每一项操作都需要运行相关命令加参数。</p><p>如此一来，关于备份这件事，就只剩下自动化版本管理这个问题需要解决了。</p><h3 id=autorestichttpsautoresticvercelapp><a href=https://autorestic.vercel.app/>autorestic</a><a hidden class=anchor aria-hidden=true href=#autorestichttpsautoresticvercelapp>#</a></h3><p>autorestic 是 restic 的一个「包装器」，通过自动调用 restic 的方法，加上了配置文件、定时执行（伪）等功能。将命令行程序扩展成了一个基于固定配置可重复运行的应用。</p><p>相关的命令说明还是需要自己看一下官方的文档。</p><p>但 autorestic 依然是一个命令行，不是服务，虽然提供了配置文件的方式可重复操作，但依然无法实现定时自动备份功能</p><h3 id=crontab>crontab<a hidden class=anchor aria-hidden=true href=#crontab>#</a></h3><p>autorestic 的官方文档推荐的方式即配合 crontab 每 5 分钟执行一次的方式 将 autorestic 配置成一个伪服务，进而提供定时自动备份功能。</p><h3 id=docker>docker<a hidden class=anchor aria-hidden=true href=#docker>#</a></h3><p>最后，终极的解决方案，是需要将这些工具组合起来，形成一套完整的工具链。于是将对应的工具打包进 docker image，就可以便捷的部署和使用对应的自动化备份方案了。</p><h3 id=2023-12-18-更新>2023-12-18 更新<a hidden class=anchor aria-hidden=true href=#2023-12-18-更新>#</a></h3><ul><li>之前一直没有能自动进行 forget 操作，导致备份的数据越来越多。这个问题需要在 autorestic 的配置文件中添加 forget 的配置。</li><li>之前的镜像的 hostname 每次都是随机生成的，导致每次都会重新初始化，现在已经解决了这个问题，通过在 docker-compose 中添加 hostname，可以保证每次都是同一个 hostname 了。</li></ul><h2 id=最终的数据自动化备份解决方案>最终的数据自动化备份解决方案<a hidden class=anchor aria-hidden=true href=#最终的数据自动化备份解决方案>#</a></h2><p>我通过 <a href=https://github.com/uglyboy-tl/autorestic-docker>Github</a> 的自动化流程，构建了实现上述 autorestic 服务的 <a href=https://hub.docker.com/r/guixi/autorestic>镜像</a> ，使用说明如下：</p><h3 id=features>Features<a hidden class=anchor aria-hidden=true href=#features>#</a></h3><p>Often it is usefully to trigger backups automatically. So in this image, it would be trigger the command every 5min.</p><h3 id=install>Install<a hidden class=anchor aria-hidden=true href=#install>#</a></h3><ol><li>Create an initial config file (<code>autorestic.yml</code>) such as:</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yml data-lang=yml><span class=line><span class=cl><span class=nt>locations</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>my-location</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>from</span><span class=p>:</span><span class=w> </span><span class=l>/data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>to</span><span class=p>:</span><span class=w> </span><span class=l>my-backend</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>forget</span><span class=p>:</span><span class=w> </span><span class=l>prune</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cron</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;0 3 * * 0&#39;</span><span class=w> </span><span class=c># Every Sunday at 3:00</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>You can read full <a href=https://autorestic.vercel.app/config>docs</a> to configure it.</p><ol start=2><li>Create an empty file (<code>autorestic.lock.yml</code>)</li><li>run [[docker-compose]] as below:</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;3&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>services</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>autorestic</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>guixi/autorestic</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>autorestic</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>hostname</span><span class=p>:</span><span class=w> </span><span class=l>autorestic</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>/etc/localtime:/etc/localtime:ro</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>$(pwd)/autorestic.yml:/root/.autorestic.yml:ro</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>$(pwd)/autorestic.lock.yml:/root/.autorestic.lock.yml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>~/.config/rclone/rclone.conf:/root/.config/rclone/rclone.conf:ro </span><span class=w> </span><span class=c>#optional</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>my-volume:/data</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=usage>Usage<a hidden class=anchor aria-hidden=true href=#usage>#</a></h3><p>you can use autorestic to show all buckups such as</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker <span class=nb>exec</span> -it autorestic autorestic <span class=nb>exec</span> -av -- snapshots
</span></span></code></pre></td></tr></table></div></div><p>and also use restic directly such as</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker <span class=nb>exec</span> -it autorestic restic
</span></span></code></pre></td></tr></table></div></div><h3 id=license>License<a hidden class=anchor aria-hidden=true href=#license>#</a></h3><p><a href=https://github.com/uglyboy-tl/autorestic-docker/blob/main/LICENSE>MIT</a> © Uglyboy</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.uglyboy.cn/tags/restic/>Restic</a></li><li><a href=https://blog.uglyboy.cn/tags/docker/>Docker</a></li><li><a href=https://blog.uglyboy.cn/tags/automation/>Automation</a></li></ul><nav class=paginav><a class=prev href=https://blog.uglyboy.cn/slides/2022/04/27/%E7%A7%91%E5%AD%A6%E5%86%B3%E7%AD%96%E8%AE%B2%E4%B9%89/><span class=title>« 上一页</span><br><span>科学决策讲义</span>
</a><a class=next href=https://blog.uglyboy.cn/posts/2021/11/11/%E7%BB%84%E7%BB%87%E7%90%86%E8%AE%BA/><span class=title>下一页 »</span><br><span>组织理论</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://blog.uglyboy.cn/>拾柒读库</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="复制代码";function s(){t.innerHTML="已复制！",setTimeout(()=>{t.innerHTML="复制代码"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>